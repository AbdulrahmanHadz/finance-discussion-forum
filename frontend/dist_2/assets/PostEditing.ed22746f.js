import{S as p,c as _,v}from"./SubmitButton.4666d5fc.js";import{S as T}from"./SelectTags.89770421.js";import{R as M}from"./ResultMessages.ee1a2669.js";import{_ as y,r as l,o as r,d as k,c,h as S,a,i as x,v as u,x as m,b as B,w as g,j as b,f as C,F as I}from"./index.51d15672.js";const E={props:{form:{type:Object,required:!1},tags:{type:Array,required:!1},submitButtonLabel:{type:String,default:"Create Post"}},created(){this.userId=this.form.userId,this.selectedTags.push(...this.tags)},data(){return{required:{title:{min:5,max:100},content:{min:5,max:4e3}},successMessage:null,errorMessage:null,buttonDisabled:!1,buttonKey:0,userId:null,selectedTags:[],unselectedTags:[]}},components:{SubmitButton:p,SelectTagsCheckBoxes:T,ResultMessages:M},methods:{onSubmit(){this.$emit("update",{form:this.form,tagIdsToAdd:this.selectedTags,tagIdsToRemove:this.unselectedTags})},validate(){const i=_(this.form,Object.keys(this.required));if(i){this.errorMessage=i;return}this.errorMessage=null;const e=v(this.form,this.required);if(e){this.errorMessage=e;return}},updateTags(i){this.selectedTags.push(...i.tagIdsToAdd),this.unselectedTags.push(...i.tagIdsToRemove)},cancelEdit(){this.$emit("cancel")}}},w={class:"input-create-form-div"},R={class:"post-create-row"},V=a("p",{class:"title-create"},"Title:",-1),q={class:"post-create-row"},D=a("p",{class:"title-create"},"Message:",-1),F={class:"post-editing-buttons"};function N(i,e,n,P,o,t){const f=l("ResultMessages"),h=l("SelectTagsCheckBoxes"),d=l("SubmitButton");return r(),k(I,null,[o.successMessage!=null||o.errorMessage!=null?(r(),c(f,{key:0,successMessage:o.successMessage,errorMessage:o.errorMessage},null,8,["successMessage","errorMessage"])):S("",!0),a("div",w,[a("form",{class:"stack title-create-form",id:"myForm",onSubmit:e[4]||(e[4]=x((...s)=>t.onSubmit&&t.onSubmit(...s),["prevent"])),novalidate:"novalidate"},[a("div",R,[V,u(a("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>n.form.title=s),class:"title-input-create",onInput:e[1]||(e[1]=(...s)=>t.validate&&t.validate(...s))},null,544),[[m,n.form.title]])]),a("div",q,[D,u(a("textarea",{"onUpdate:modelValue":e[2]||(e[2]=s=>n.form.content=s),class:"title-content-create",onInput:e[3]||(e[3]=(...s)=>t.validate&&t.validate(...s))},null,544),[[m,n.form.content]])]),B(h,{onUpdate:t.updateTags,passedTags:n.tags},null,8,["onUpdate","passedTags"]),a("div",F,[(r(),c(d,{key:o.buttonKey,disabled:o.buttonDisabled,onClick:t.cancelEdit,class:"cancel-button"},{submit:g(()=>[b(" Cancel ")]),_:1},8,["disabled","onClick"])),(r(),c(d,{key:o.buttonKey,disabled:o.buttonDisabled,onClick:t.onSubmit},{submit:g(()=>[b(C(n.submitButtonLabel),1)]),_:1},8,["disabled","onClick"]))])],32)])],64)}const L=y(E,[["render",N]]);export{L as P};
