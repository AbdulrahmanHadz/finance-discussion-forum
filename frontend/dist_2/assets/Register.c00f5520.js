import{_ as h,r as i,o as a,d,a as m,f,c as _,h as g,p as w,s as M,i as x,b as u,w as y,j as V}from"./index.51d15672.js";import{E as k,U as E,P as F,R as B}from"./rememberme.699f005e.js";import{b as S,S as P,c as q,d as D,v as R}from"./SubmitButton.4666d5fc.js";import{g as U}from"./goToPrevious.cf24a95f.js";const C={data(){return{errorMessage:null}},methods:{validate(n){this.errorMessage=S(this.label,n.target.value),this.errorMessage==null&&this.$emit("update:modelValue",n.target.value)}},components:{ErrorField:k},props:{label:{type:String,default:"Email"},modelValue:{type:String}}},I={class:"stack"},N={class:"loginLabels"},K=["value"];function j(n,s,t,o,e,l){const c=i("ErrorField");return a(),d("div",I,[m("label",N,f(t.label)+":",1),m("input",{type:"email",value:t.modelValue,onInput:s[0]||(s[0]=(...p)=>l.validate&&l.validate(...p))},null,40,K),e.errorMessage!=null?(a(),_(c,{key:0,error:e.errorMessage},null,8,["error"])):g("",!0)])}const L=h(C,[["render",j]]);const O={data(){return{form:{email:null,username:null,password:null,confirmPassword:null},required:{username:{min:3,max:20},password:{min:5,max:72},confirmPassword:{min:5,max:72},email:null},successMessage:null,errorMessage:null,buttonDisabled:!0,buttonKey:0}},components:{UsernameField:E,PasswordField:F,SubmitButton:P,RememberCheckbox:B,EmailField:L},methods:{onSubmit(n){w("users",this.form).then(s=>{console.log(s);const o=s.data.data.id;M(o,this.form.username),this.successMessage="Registered.",setTimeout(()=>{this.successMessage=null,this.errorMessage=null,U(this.$router)},2e3)}).catch(s=>{console.log(s);const o=s.response.data;o.hasOwnProperty("message")&&(this.errorMessage=o.message)})},validate(n){if(q(this.form,Object.keys(this.required))){this.buttonDisabled=!0,this.rerenderButton();return}this.errorMessage=null;const t=D(this.form.password,this.form.confirmPassword);if(t){this.errorMessage=t,this.buttonDisabled=!0,this.rerenderButton();return}this.errorMessage=null;const o=R(this.form,this.required);if(o){this.errorMessage=o,this.buttonDisabled=!0,this.rerenderButton();return}console.log(this.form),this.errorMessage=null,this.buttonDisabled=!1,this.rerenderButton()},rerenderButton(){this.buttonKey++}}},T={class:"stack full-container"},z={class:"mb-5 p-3 font-bold text-lg"},A={key:0,class:"success"},G={key:1,class:"error"};function H(n,s,t,o,e,l){const c=i("UsernameField"),p=i("EmailField"),b=i("PasswordField"),v=i("SubmitButton");return a(),d("div",T,[m("div",z,[e.successMessage!=null?(a(),d("h4",A,f(e.successMessage),1)):g("",!0),e.errorMessage!=null?(a(),d("p",G,f(e.errorMessage),1)):g("",!0)]),m("div",null,[m("form",{class:"stack",id:"myForm",onSubmit:s[4]||(s[4]=x((...r)=>l.onSubmit&&l.onSubmit(...r),["prevent"])),onInput:s[5]||(s[5]=(...r)=>l.validate&&l.validate(...r)),novalidate:"novalidate"},[u(c,{modelValue:e.form.username,"onUpdate:modelValue":s[0]||(s[0]=r=>e.form.username=r),modelModifiers:{trim:!0},min:e.required.username.min,max:e.required.username.max},null,8,["modelValue","min","max"]),u(p,{modelValue:e.form.email,"onUpdate:modelValue":s[1]||(s[1]=r=>e.form.email=r),modelModifiers:{trim:!0}},null,8,["modelValue"]),u(b,{modelValue:e.form.password,"onUpdate:modelValue":s[2]||(s[2]=r=>e.form.password=r),min:e.required.password.min,max:e.required.password.max},null,8,["modelValue","min","max"]),u(b,{label:"Confirm Password",modelValue:e.form.confirmPassword,"onUpdate:modelValue":s[3]||(s[3]=r=>e.form.confirmPassword=r),min:e.required.password.min,max:e.required.password.max},null,8,["modelValue","min","max"]),(a(),_(v,{key:e.buttonKey,disabled:e.buttonDisabled,onClick:l.onSubmit},{submit:y(()=>[V(" Register ")]),_:1},8,["disabled","onClick"]))],32)])])}const Y=h(O,[["render",H]]);export{Y as default};
