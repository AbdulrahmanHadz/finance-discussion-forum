import{_ as f,q as p,g as h,p as M,t as _,r as l,o as c,d as v,c as b,h as k,a,i as x,v as u,x as m,b as I,w as S,j as w}from"./index.51d15672.js";import{R as y}from"./ResultMessages.ee1a2669.js";import{S as B,c as N,v as T}from"./SubmitButton.4666d5fc.js";import{g as D}from"./goToPrevious.cf24a95f.js";const R={created(){this.form.userId=this.userId=p()},data(){return{form:{userId:null,name:null,description:null},rules:{name:{min:1,max:50},description:{min:0,max:255,required:!1}},required:["name"],successMessage:null,errorMessage:null}},components:{ResultMessages:y,SubmitButton:B},methods:{onSubmit(){if(this.errorMessage!=null)return;let o=!1;h("tags",{name:this.form.name}).then(e=>{if(e.data.data.length!=0){this.errorMessage="Name already taken.",o=!0;return}M("tags",this.form).then(n=>{console.log(n),this.successMessage="Tag Added",_().fetchTags(),setTimeout(()=>{this.successMessage=null,this.errorMessage=null,D(this.$router)},2e3)}).catch(n=>{console.log(n);const s=n.response.data;"message"in s&&(this.errorMessage=s.message)})}).catch(e=>{console.log(e),o=!0})},validate(){const o=N(this.form,this.required);if(o){this.errorMessage=o;return}this.errorMessage=null;const e=T(this.form,this.rules);if(e){this.errorMessage=e;return}this.errorMessage=null}}},V={class:"stack"},C={class:"input-create-form-div"},E={class:"post-create-row"},q=a("p",{class:"title-create"},"Name:",-1),F={class:"post-create-row"},A=a("p",{class:"title-create"},"Description:",-1);function U(o,e,d,n,t,s){const i=l("ResultMessages"),g=l("SubmitButton");return c(),v("div",V,[t.successMessage!=null||t.errorMessage!=null?(c(),b(i,{key:0,successMessage:t.successMessage,errorMessage:t.errorMessage},null,8,["successMessage","errorMessage"])):k("",!0),a("div",C,[a("form",{class:"stack title-create-form",id:"myForm",onSubmit:e[4]||(e[4]=x((...r)=>s.onSubmit&&s.onSubmit(...r),["prevent"])),novalidate:"novalidate"},[a("div",E,[q,u(a("input",{"onUpdate:modelValue":e[0]||(e[0]=r=>t.form.name=r),class:"title-input-create",onInput:e[1]||(e[1]=(...r)=>s.validate&&s.validate(...r))},null,544),[[m,t.form.name]])]),a("div",F,[A,u(a("textarea",{"onUpdate:modelValue":e[2]||(e[2]=r=>t.form.description=r),class:"tag-description-create",onInput:e[3]||(e[3]=(...r)=>s.validate&&s.validate(...r))},null,544),[[m,t.form.description]])]),I(g,{disabled:!1,onClick:s.onSubmit},{submit:S(()=>[w(" Add Tag ")]),_:1},8,["onClick"])],32)])])}const J=f(R,[["render",U]]);export{J as default};
